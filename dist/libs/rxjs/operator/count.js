"use strict";function count(t){return this.lift(new CountOperator(t,this))}var __extends=this&&this.__extends||function(t,e){function r(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},Subscriber_1=require("../Subscriber");exports.count=count;var CountOperator=function(){function t(t,e){this.predicate=t,this.source=e}return t.prototype.call=function(t,e){return e.subscribe(new CountSubscriber(t,this.predicate,this.source))},t}(),CountSubscriber=function(t){function e(e,r,i){t.call(this,e),this.predicate=r,this.source=i,this.count=0,this.index=0}return __extends(e,t),e.prototype._next=function(t){this.predicate?this._tryPredicate(t):this.count++},e.prototype._tryPredicate=function(t){var e;try{e=this.predicate(t,this.index++,this.source)}catch(t){return void this.destination.error(t)}e&&this.count++},e.prototype._complete=function(){this.destination.next(this.count),this.destination.complete()},e}(Subscriber_1.Subscriber);