"use strict";function single(e){return this.lift(new SingleOperator(e,this))}var __extends=this&&this.__extends||function(e,t){function i(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},Subscriber_1=require("../Subscriber"),EmptyError_1=require("../util/EmptyError");exports.single=single;var SingleOperator=function(){function e(e,t){this.predicate=e,this.source=t}return e.prototype.call=function(e,t){return t.subscribe(new SingleSubscriber(e,this.predicate,this.source))},e}(),SingleSubscriber=function(e){function t(t,i,r){e.call(this,t),this.predicate=i,this.source=r,this.seenValue=!1,this.index=0}return __extends(t,e),t.prototype.applySingleValue=function(e){this.seenValue?this.destination.error("Sequence contains more than one element"):(this.seenValue=!0,this.singleValue=e)},t.prototype._next=function(e){var t=this.predicate;this.index++,t?this.tryNext(e):this.applySingleValue(e)},t.prototype.tryNext=function(e){try{var t=this.predicate(e,this.index,this.source);t&&this.applySingleValue(e)}catch(e){this.destination.error(e)}},t.prototype._complete=function(){var e=this.destination;this.index>0?(e.next(this.seenValue?this.singleValue:void 0),e.complete()):e.error(new EmptyError_1.EmptyError)},t}(Subscriber_1.Subscriber);