"use strict";function switchMap(t,e){return this.lift(new SwitchMapOperator(t,e))}var __extends=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},OuterSubscriber_1=require("../OuterSubscriber"),subscribeToResult_1=require("../util/subscribeToResult");exports.switchMap=switchMap;var SwitchMapOperator=function(){function t(t,e){this.project=t,this.resultSelector=e}return t.prototype.call=function(t,e){return e.subscribe(new SwitchMapSubscriber(t,this.project,this.resultSelector))},t}(),SwitchMapSubscriber=function(t){function e(e,i,r){t.call(this,e),this.project=i,this.resultSelector=r,this.index=0}return __extends(e,t),e.prototype._next=function(t){var e,i=this.index++;try{e=this.project(t,i)}catch(t){return void this.destination.error(t)}this._innerSub(e,t,i)},e.prototype._innerSub=function(t,e,i){var r=this.innerSubscription;r&&r.unsubscribe(),this.add(this.innerSubscription=subscribeToResult_1.subscribeToResult(this,t,e,i))},e.prototype._complete=function(){var e=this.innerSubscription;e&&!e.closed||t.prototype._complete.call(this)},e.prototype._unsubscribe=function(){this.innerSubscription=null},e.prototype.notifyComplete=function(e){this.remove(e),this.innerSubscription=null,this.isStopped&&t.prototype._complete.call(this)},e.prototype.notifyNext=function(t,e,i,r,o){this.resultSelector?this._tryNotifyNext(t,e,i,r):this.destination.next(e)},e.prototype._tryNotifyNext=function(t,e,i,r){var o;try{o=this.resultSelector(t,e,i,r)}catch(t){return void this.destination.error(t)}this.destination.next(o)},e}(OuterSubscriber_1.OuterSubscriber);