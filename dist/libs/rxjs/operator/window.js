"use strict";function window(t){return this.lift(new WindowOperator(t))}var __extends=this&&this.__extends||function(t,e){function o(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)},Subject_1=require("../Subject"),OuterSubscriber_1=require("../OuterSubscriber"),subscribeToResult_1=require("../util/subscribeToResult");exports.window=window;var WindowOperator=function(){function t(t){this.windowBoundaries=t}return t.prototype.call=function(t,e){var o=new WindowSubscriber(t),i=e.subscribe(o);return i.closed||o.add(subscribeToResult_1.subscribeToResult(o,this.windowBoundaries)),i},t}(),WindowSubscriber=function(t){function e(e){t.call(this,e),this.window=new Subject_1.Subject,e.next(this.window)}return __extends(e,t),e.prototype.notifyNext=function(t,e,o,i,n){this.openWindow()},e.prototype.notifyError=function(t,e){this._error(t)},e.prototype.notifyComplete=function(t){this._complete()},e.prototype._next=function(t){this.window.next(t)},e.prototype._error=function(t){this.window.error(t),this.destination.error(t)},e.prototype._complete=function(){this.window.complete(),this.destination.complete()},e.prototype._unsubscribe=function(){this.window=null},e.prototype.openWindow=function(){var t=this.window;t&&t.complete();var e=this.destination,o=this.window=new Subject_1.Subject;e.next(o)},e}(OuterSubscriber_1.OuterSubscriber);