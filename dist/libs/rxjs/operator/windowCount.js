"use strict";function windowCount(t,i){return void 0===i&&(i=0),this.lift(new WindowCountOperator(t,i))}var __extends=this&&this.__extends||function(t,i){function n(){this.constructor=t}for(var o in i)i.hasOwnProperty(o)&&(t[o]=i[o]);t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)},Subscriber_1=require("../Subscriber"),Subject_1=require("../Subject");exports.windowCount=windowCount;var WindowCountOperator=function(){function t(t,i){this.windowSize=t,this.startWindowEvery=i}return t.prototype.call=function(t,i){return i.subscribe(new WindowCountSubscriber(t,this.windowSize,this.startWindowEvery))},t}(),WindowCountSubscriber=function(t){function i(i,n,o){t.call(this,i),this.destination=i,this.windowSize=n,this.startWindowEvery=o,this.windows=[new Subject_1.Subject],this.count=0,i.next(this.windows[0])}return __extends(i,t),i.prototype._next=function(t){for(var i=this.startWindowEvery>0?this.startWindowEvery:this.windowSize,n=this.destination,o=this.windowSize,e=this.windows,r=e.length,s=0;s<r&&!this.closed;s++)e[s].next(t);var u=this.count-o+1;if(u>=0&&u%i===0&&!this.closed&&e.shift().complete(),++this.count%i===0&&!this.closed){var c=new Subject_1.Subject;e.push(c),n.next(c)}},i.prototype._error=function(t){var i=this.windows;if(i)for(;i.length>0&&!this.closed;)i.shift().error(t);this.destination.error(t)},i.prototype._complete=function(){var t=this.windows;if(t)for(;t.length>0&&!this.closed;)t.shift().complete();this.destination.complete()},i.prototype._unsubscribe=function(){this.count=0,this.windows=null},i}(Subscriber_1.Subscriber);